-- Stocks Table
CREATE TABLE Stocks (
    Symbol NVARCHAR(10) PRIMARY KEY,  -- Matches TickerSymbol in Trade
    Name NVARCHAR(100) NOT NULL
);

-- Brokers Table
CREATE TABLE Brokers (
    Id UNIQUEIDENTIFIER PRIMARY KEY DEFAULT NEWID(),
    Name NVARCHAR(100) NOT NULL,
    IsActive BIT NOT NULL DEFAULT 1
);

-- Trades Table
CREATE TABLE Trades (
    Id INT IDENTITY(1,1) PRIMARY KEY,
    TickerSymbol NVARCHAR(10) NOT NULL,  -- FK to Stocks(Symbol)
    Price DECIMAL(18, 2) NOT NULL,
    Shares DECIMAL(18, 2) NOT NULL,
    BrokerId UNIQUEIDENTIFIER NOT NULL,  -- FK to Brokers(Id)
    Timestamp DATETIME NOT NULL DEFAULT GETUTCDATE(),

    FOREIGN KEY (TickerSymbol) REFERENCES Stocks(Symbol),
    FOREIGN KEY (BrokerId) REFERENCES Brokers(Id)
);
